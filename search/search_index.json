{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"ABS-KoSync Enhanced","text":"**The ultimate bridge for cross-platform reading and listening synchronization.**  [Getting Started](getting-started.md){ .md-button .md-button--primary } [View on GitHub](https://github.com/cporcellijr/abs-kosync-bridge){ .md-button }"},{"location":"#what-is-it","title":"\ud83d\udcd6 What is it?","text":"<p>ABS-KoSync Enhanced is a powerful, automated synchronization engine designed to unify your reading and listening experiences. It bridges the gap between audiobooks and ebooks, ensuring that whether you're listening on the go or reading on your e-reader, your progress is always perfectly aligned.</p>"},{"location":"#five-way-synchronization","title":"\ud83d\udd04 Five-Way Synchronization","text":"<p>The system keeps your progress in sync across all major platforms:</p> Platform Type Capability Audiobookshelf Audiobooks Full Read/Write Sync KOReader / KOSync Ebooks Full Read/Write Sync Storyteller Enhanced Reader Full Read/Write Sync (REST API) Booklore Library Management Full Read/Write Sync Hardcover.app Book Tracking Write-Only Tracking (Auto-Update Finished Status)"},{"location":"#features","title":"\u2728 Features","text":""},{"location":"#core-sync-engine","title":"\ud83d\ude80 Core Sync Engine","text":"<ul> <li>Robust Synchronization: Syncs progress bi-directionally between Audiobookshelf and KOReader.</li> <li>Split-Port Security: Optionally run the sync service on a separate port from the admin dashboard for safe internet exposure.</li> <li>Forge: Active tooling to prepare and trigger \"Read-Along\" books for Storyteller.</li> <li>Multi-Device Support: Handles multiple KOReader devices seamlessly.</li> <li>Multi-Platform Support: Synchronize progress across five different ecosystems simultaneously.</li> <li>Smart Conflict Resolution: \"Furthest progress wins\" logic with built-in anti-regression protection.</li> <li>Rich Positioning: Support for XPath, CSS selectors, and EPUB CFI for pixel-perfect positioning.</li> <li>Resumable Jobs: Background transcription jobs resume automatically if interrupted.</li> </ul>"},{"location":"#management-web-ui","title":"\ud83d\udda5\ufe0f Management Web UI","text":"<ul> <li>Real-Time Dashboard: Monitor progress and sync status across all your books.</li> <li>Advanced Matcher: Manual mapping for complex titles or different editions.</li> <li>Batch Processing: Queue and process multiple books for synchronization in bulk.</li> <li>Forge: Automated workflow for Storyteller readaloud generation.</li> <li>Dynamic Settings: Configure your entire system from the Web UI with instant hot-reloading.</li> </ul>"},{"location":"#automation-reliability","title":"\ud83e\udd16 Automation &amp; Reliability","text":"<ul> <li>Background Daemon: Configurable sync intervals for hands-off operation.</li> <li>Auto-Organization: Automatic addition to ABS collections and Booklore shelves.</li> <li>Error Recovery: Automatic retry logic for failed transcription or sync tasks.</li> </ul>"},{"location":"#how-it-works","title":"\ud83d\udee0\ufe0f How It Works","text":"<p>The sync engine operates on a sophisticated event-driven architecture (V2):</p> <ol> <li>Triggers: Changes are detected via Instant Pushes (Internal KOSync) or Periodic Polling (ABS/Booklore).</li> <li>Normalization: Progress from all clients is normalized into a common format (timestamp or percentage).</li> <li>Discrepancy Check: The system identifies if a significant change has occurred.</li> <li>Leader Election: The client with the most recent explicit progress becomes the \"Leader\".</li> <li>Translation: If the Leader is an Audiobook and followers are Ebooks (or vice-versa), the system uses Whisper AI transcripts to translate the timestamp into an exact text position (or vice versa).</li> <li>Propagation: The new position is sent to all other configured clients.</li> </ol> <pre><code>graph TD\n    A[Start Sync Cycle] --&gt; B{Trigger?}\n    B --&gt;|Poll Timer| C[Fetch Progress (All Clients)]\n    B --&gt;|Instance Sync| C\n    B --&gt;|KoSync Push| C\n    C --&gt; D[Normalize Positions]\n    D --&gt; E{Leader Check}\n    E --&gt;|Significant Delta| F[Identify Leader]\n    E --&gt;|No Change| A\n    F --&gt; G{Format Mismatch?}\n    G --&gt;|Yes| H[Audio &lt;--&gt; Text Translation]\n    G --&gt;|No| I[Direct Sync]\n    H --&gt; J[Calculate New Position]\n    I --&gt; J\n    J --&gt; K[Update Follower Clients]\n    K --&gt; L[Save State to DB]\n    L --&gt; A\n</code></pre> <p>Audio to Text Conversion</p> <p>The system extracts a snippet of text from the audiobook transcript at the current timestamp and performs a fuzzy search within the EPUB to find the corresponding ebook location.</p>"},{"location":"changelog/","title":"Changelog","text":"<p>For the full history of changes, please refer to the GitHub Releases page.</p>"},{"location":"changelog/#630-2026-02-18","title":"[6.3.0] - 2026-02-18","text":""},{"location":"changelog/#features","title":"\ud83d\ude80 Features","text":"<ul> <li>Tri-Link Architecture: Maintain a three-way link between ABS audiobook, KOReader ebook, and Storyteller entries.</li> <li>Auto-Forge Pipeline: Automated downloading, staging, and hand-off to Storyteller for processing. Triggered from the Matcher \u2014 automatically creates the sync mapping after Storyteller finishes.</li> <li>Hardcover.app Audiobook Support: Link specific editions and sync listening progress (in seconds).</li> <li>Booklore &amp; CWA (OPDS) Integration: Fetch ebooks from Booklore and OPDS sources.</li> <li>Split-Port Security Mode: Run sync and admin UI on separate ports.</li> <li>New Transcription Providers: Support for Whisper.cpp Server, Deepgram API, and CUDA GPU acceleration.</li> <li>Progress Suggestions: Smart auto-discovery and suggestions for potential matches.</li> <li>Telegram Notifications: Send log alerts to a Telegram chat at a configurable severity level.</li> <li>UI Redesign: Horizontal dashboard cards, overhauled match pages, and responsive settings UI.</li> </ul>"},{"location":"changelog/#fixes","title":"\ud83d\udc1b Fixes","text":"<ul> <li>Fixed KOReader sync crashes (XPath double <code>body</code> tag issue).</li> <li>Fixed KOSync hash overwrites by Storyteller artifacts.</li> <li>Fixed race conditions in Storyteller ingestion.</li> <li>Fixed special characters in filenames breaking glob searches.</li> <li>Fixed KOSync client headers, legacy exception types, and sync position payloads.</li> </ul>"},{"location":"changelog/#maintenance","title":"\ud83e\uddf9 Maintenance","text":"<ul> <li>Logging Standardization: Consistent emoji prefixes and log levels across the entire codebase.</li> <li>Unified DB Architecture: Transitioned to SQLAlchemy for alignments, transcripts, and settings.</li> <li>Alembic Migrations: Improved migration tracking and safety checks.</li> <li>Storyteller API: Removed direct DB access in favor of strictly API-based communication.</li> </ul>"},{"location":"configuration/","title":"Configuration","text":"<p>[!NOTE] All configuration is managed via the Web UI at <code>/settings</code>. Environment variables can be used for initial bootstrapping, but values set in the database (via UI) take precedence.</p>"},{"location":"configuration/#web-ui-settings","title":"Web UI Settings","text":"<p>The most convenient way to manage configuration is via the Settings page in the Web UI. Changes made here are applied instantly (triggering a soft restart).</p>"},{"location":"configuration/#split-port-security-optional","title":"Split-Port Security (Optional)","text":"<p>You can configure the system to listen on two separate ports:</p> <ol> <li>Primary Port (8080): Hosts the Admin Dashboard and all API routes. Keep this private/LAN-only.</li> <li>KOSync Port: Hosts only the KOSync protocol routes needed for KOReader devices. This is safe to expose to the internet.</li> </ol> <p>To enable this mode, set the <code>KOSYNC_PORT</code> environment variable (e.g., <code>KOSYNC_PORT=5758</code>) and map it in Docker.</p> <pre><code>ports:\n  - \"8080:5757\"   # Admin Dashboard\n  - \"5758:5758\"   # Sync Protocol (Internet Safe)\n</code></pre>"},{"location":"configuration/#integrations","title":"Integrations","text":""},{"location":"configuration/#kosync-koreader","title":"KOSync (KOReader)","text":"<ul> <li>Server: Your KOSync server URL (e.g., <code>https://koreader.mydomain.com/api/koreader</code>).</li> <li>Username: Your KOSync username.</li> <li>Password: Your KOSync password.</li> <li>Save Hash Method: How KOReader calculates document integrity. Keep as default (<code>content</code>) unless you know what you're doing.</li> </ul>"},{"location":"configuration/#storyteller","title":"Storyteller","text":"<ul> <li>Storyteller URL: URL to your Storyteller instance.</li> <li>Storyteller Username / Password: Credentials for your Storyteller admin account.</li> <li>Sync Mode: REST API only. The bridge communicates exclusively via the Storyteller API.</li> </ul> <p>[!NOTE] The legacy method of mapping a local Storyteller database (<code>/storyteller_data</code>) has been removed. The bridge now communicates strictly via the Storyteller API.</p>"},{"location":"configuration/#hardcoverapp","title":"Hardcover.app","text":"<ul> <li>Enable: Toggle <code>HARDCOVER_ENABLED</code> to <code>true</code>.</li> <li>API Token: Your personal API token from hardcover.app/account/api.</li> <li>Behavior: Write-only tracking. The bridge auto-matches books by title/author and updates your reading progress and status (e.g., marks as \"Finished\" when complete).</li> </ul>"},{"location":"configuration/#telegram-notifications","title":"Telegram Notifications","text":"<ul> <li>Enable: Toggle <code>TELEGRAM_ENABLED</code> to <code>true</code>.</li> <li>Bot Token: Your Telegram bot token (from @BotFather).</li> <li>Chat ID: The chat ID to send messages to (your user ID or a group ID).</li> <li>Min Log Level: The minimum severity level to forward (<code>DEBUG</code>, <code>INFO</code>, <code>WARNING</code>, <code>ERROR</code>, <code>CRITICAL</code>). Default: <code>ERROR</code>.</li> </ul>"},{"location":"configuration/#shelfmark","title":"Shelfmark","text":"<ul> <li>Shelfmark URL: URL to your Shelfmark instance. When configured, a Shelfmark icon appears in the navigation bar for quick access.</li> </ul>"},{"location":"configuration/#booklore","title":"Booklore","text":"<ul> <li>Booklore URL: URL to your Booklore/Calibre-Web instance.</li> <li>API Key: For managing shelves/collections.</li> <li>Target Library: (Optional) To prevent cross-library contamination, you can specify the Booklore Library ID to use.</li> </ul>"},{"location":"configuration/#cwa-calibre-web-automated","title":"CWA (Calibre-Web Automated)","text":"<ul> <li>CWA Server URL: URL to your Calibre-Web OPDS feed (e.g. <code>http://my-calibre-web/opds</code>).</li> <li>CWA Username/Password: Credentials for Calibre-Web.</li> <li>Enabled: Set to <code>true</code> to enable.</li> <li>Note: CWA allows the bridge to download ebooks directly from Calibre-Web for Forge/Sync without needing a local <code>/books</code> volume.</li> </ul>"},{"location":"configuration/#audiobookshelf","title":"Audiobookshelf","text":"<ul> <li>ABS Server URL: Your ABS instance.</li> <li>ABS API Token: Your secret token.</li> <li>Limit Search to Library: (Optional) If set, the bridge will only search for audiobooks within this specific ABS Library ID.</li> </ul>"},{"location":"configuration/#transcription-settings","title":"Transcription Settings","text":"<p>Configure the engine used for audio-to-text alignment.</p> Setting Default Description Provider <code>local</code> <code>local</code> (faster-whisper), <code>deepgram</code>, or <code>whisper_cpp</code> (via server). Whisper Model <code>tiny</code> Model size (<code>tiny</code>, <code>base</code>, <code>small</code>, <code>medium</code>, <code>large</code>). Whisper Device <code>auto</code> <code>auto</code>, <code>cpu</code>, or <code>cuda</code>. See GPU Support below. Compute Type <code>auto</code> Precision (<code>int8</code>, <code>float16</code>, <code>float32</code>). Use <code>float16</code> for GPU."},{"location":"configuration/#deepgram","title":"Deepgram","text":"<ul> <li>API Key: Your Deepgram API Key.</li> <li>Model: Specific Deepgram model tier (e.g., <code>nova-2</code>).</li> </ul>"},{"location":"configuration/#whispercpp","title":"WhisperCPP","text":"<ul> <li>Server URL: URL to your running <code>whisper.cpp</code> server (e.g. <code>http://my-whisper-server:8080/inference</code>).</li> <li>Model: Now controls the <code>model</code> parameter sent to the server (e.g. <code>small</code>, <code>medium</code>).</li> </ul>"},{"location":"configuration/#sync-tuning","title":"Sync Tuning","text":"<p>Advanced settings to fine-tune the synchronization logic.</p> Setting Default Description Sync Period (Minutes) <code>5</code> How often the background sync runs. ABS Delta (Seconds) <code>60</code> Minimum progress change (in seconds) required to trigger an update from ABS. KoSync Delta (%) <code>0.5</code> Minimum progress change (0.5%) required to trigger an update from KOReader. KoSync Delta (Words) <code>400</code> Minimum word-count change required to trigger a KOSync update (used alongside the % delta). Fuzzy Match Threshold <code>0.80</code> (0.0-1.0) Confidence required for text matching (80%). Job Retries <code>5</code> How many times to retry failed transcription jobs. Job Retry Delay (Mins) <code>15</code> Minutes to wait before retrying a failed transcription job."},{"location":"configuration/#advanced-toggles","title":"Advanced Toggles","text":"<ul> <li>Sync ABS Ebook: If enabled, also syncs progress to the ebook item in ABS (if you have both mapped). This allows you to read the ebook in the ABS web reader and have that progress sync to KOReader.</li> <li>Use KOSync Percentage from Server: If enabled, uses the raw percentage value returned by the KOSync server instead of performing text-based position matching. Useful if text matching is unreliable for a specific book.</li> <li>XPath Fallback: Strategy for handling position lookups when exact paths fail.</li> <li>Reprocess on Clear: (<code>REPROCESS_ON_CLEAR_IF_NO_ALIGNMENT</code>) If enabled, clearing a mapping in the UI will also delete the alignment cache, forcing a full re-transcription next time.</li> </ul>"},{"location":"configuration/#gpu-support-optional","title":"GPU Support (Optional)","text":"<p>For significantly faster transcription (when using <code>local</code> provider), you can enable NVIDIA GPU acceleration.</p>"},{"location":"configuration/#1-install-nvidia-container-toolkit","title":"1. Install NVIDIA Container Toolkit","text":"<p>Follow the official guide to install the NVIDIA Container Toolkit for your host OS.</p>"},{"location":"configuration/#2-update-docker-compose","title":"2. Update Docker Compose","text":"<p>Uncomment/Add the <code>deploy</code> section to your <code>docker-compose.yml</code>:</p> <pre><code>services:\n  abs-kosync:\n    # ... other config ...\n    deploy:\n      resources:\n        reservations:\n          devices:\n            - driver: nvidia\n              count: 1\n              capabilities: [gpu]\n</code></pre>"},{"location":"configuration/#3-configure-settings","title":"3. Configure Settings","text":"<p>In the Web UI Settings:</p> <ol> <li>Set Whisper Device to <code>cuda</code>.</li> <li>Set Whisper Compute Type to <code>float16</code>.</li> <li>Set Whisper Model to <code>small</code> or <code>medium</code> (GPUs can handle larger models easily).</li> </ol>"},{"location":"getting-started/","title":"Getting Started","text":""},{"location":"getting-started/#goal","title":"\ud83c\udfaf Goal","text":"<p>Get your audiobooks and ebooks syncing in 10 minutes!</p>"},{"location":"getting-started/#prerequisites","title":"Prerequisites","text":"<p>Before you begin, ensure you have the following:</p> <ul> <li>Docker and Docker Compose installed.</li> <li>An Audiobookshelf server running.</li> <li>(Optional) A Booklore instance (for syncing ebooks).</li> <li>(Optional) A KOReader sync server (either the official one, a self-hosted instance, or none if just syncing ABS &lt;-&gt; Storyteller).</li> <li>Your ebook and audiobook files accessible to the host machine.</li> </ul>"},{"location":"getting-started/#step-1-get-your-api-keys","title":"Step 1: Get Your API Keys","text":""},{"location":"getting-started/#audiobookshelf-api-key","title":"Audiobookshelf API Key","text":"<ol> <li>Log into your ABS server.</li> <li>Go to Settings \u2192 Users \u2192 Your user.</li> <li>Click \"Generate API Token\".</li> <li>Copy the token.</li> </ol>"},{"location":"getting-started/#optional-find-your-abs-library-id","title":"(Optional) Find Your ABS Library ID","text":"<p>If you want to limit the sync mapping search to a specific library (recommended for performance):</p> <ol> <li>In ABS, go to your audiobook library.</li> <li>Look at the URL: <code>https://your-server.com/library/LIBRARY_ID_HERE</code></li> <li>Copy that ID.</li> </ol>"},{"location":"getting-started/#optional-kosync-credentials","title":"(Optional) KOSync Credentials","text":"<p>If using KOReader sync:</p> <ul> <li>Your Calibre/KOSync username and password.</li> <li>KOSync server URL (usually <code>https://your-calibre.com/api/koreader</code>).</li> </ul>"},{"location":"getting-started/#optional-booklore-credentials","title":"(Optional) Booklore Credentials","text":"<p>If using Booklore:</p> <ul> <li>Your Booklore server URL.</li> <li>Username and password.</li> </ul>"},{"location":"getting-started/#step-2-prepare-your-work-directory","title":"Step 2: Prepare Your Work Directory","text":"<p>Create a directory for the application on your server:</p> <pre><code>mkdir ~/abs-kosync\ncd ~/abs-kosync\nmkdir data\n</code></pre>"},{"location":"getting-started/#step-3-create-docker-composeyml","title":"Step 3: Create docker-compose.yml","text":"<p>Copy this template and fill in YOUR values:</p> docker-compose.yml<pre><code>services:\n  abs-kosync:\n    image: ghcr.io/cporcellijr/abs-kosync-bridge:latest\n    container_name: abs_kosync\n    restart: unless-stopped\n    ports:\n      - \"8080:5757\" # Admin Panel (Keep Private)\n      # - \"5758:5758\" # Sync Protocol (Safe to Expose)\n    environment:\n      - TZ=America/New_York\n      - LOG_LEVEL=INFO\n\n      # NOTE: All configuration (ABS, etc.) is managed in the Web UI.\n\n    volumes:\n      # === REQUIRED ===\n      - ./data:/data                    # App data\n      - /path/to/ebooks:/books          # Your EPUB library\n\n      # === OPTIONAL: Forge ===\n      - /path/to/storyteller/library:/storyteller_library\n</code></pre>"},{"location":"getting-started/#security-note-split-port-mode","title":"Security Note: Split-Port Mode","text":"<p>By default, the container listens on port 8080 (mapped to 5757 int). This port exposes everything: the Admin Dashboard, Settings, and API.</p> <p>If you want to expose the KOSync endpoint to the internet (for syncing on the go) but keep the Dashboard private, you can use Split-Port Mode:</p> <ol> <li>Set <code>KOSYNC_PORT=5758</code> (or any other port) in your environment variables.</li> <li>Map that port in <code>docker-compose.yml</code> (as shown in the commented example).</li> </ol> <p>Optional Integrations</p> <p>You can configure KOSync, Storyteller, and other integrations via enviroment variables during bootstrap, but it is easier to do it later in the Web UI!</p>"},{"location":"getting-started/#step-4-start-the-service","title":"Step 4: Start the Service","text":"<pre><code>docker compose up -d\n</code></pre> <p>Check the logs to ensure everything is running smoothly:</p> <pre><code>docker compose logs -f\n</code></pre>"},{"location":"getting-started/#step-5-initial-configuration","title":"Step 5: Initial Configuration","text":"<ol> <li>Open your browser and go to <code>http://localhost:8080/settings</code> (or your server IP).</li> <li>Enter your Audiobookshelf Server URL and API Key (from Step 1).</li> <li>(Optional) Enter your KOSync, Booklore, or Storyteller credentials.</li> <li>Click Save Settings. The application will restart automatically to apply changes.</li> </ol>"},{"location":"getting-started/#step-6-create-your-first-mapping","title":"Step 6: Create Your First Mapping","text":"<ol> <li>Go to the Match page (or click \"Single Match\" on the dashboard).</li> <li>Search for an audiobook (e.g., \"The Martian\").</li> <li>Select the audiobook from the first column.</li> <li>(Optional) Select a Storyteller artifact if one was found. If not, choose \"None\".</li> <li>Select the standard EPUB file from the third column.</li> <li>Click Create Mapping.</li> </ol> <p>That's it! The system will now automatically sync progress between your audiobook and ebook every 5 minutes (default).</p>"},{"location":"troubleshooting/","title":"Troubleshooting","text":""},{"location":"troubleshooting/#common-issues","title":"Common Issues","text":""},{"location":"troubleshooting/#books-not-showing-up","title":"Books not showing up?","text":"<ul> <li>Check Volumes: Ensure your <code>/books</code> volume is correctly mounted in <code>docker-compose.yml</code>. The path inside the container must match where you are looking.</li> <li>Permissions: Ensure the user running the container has read permissions for the ebook files.</li> </ul>"},{"location":"troubleshooting/#transcription-taking-too-long","title":"Transcription taking too long?","text":"<ul> <li>Model Size: Try setting <code>WHISPER_MODEL=tiny</code> in the Settings page.</li> <li>Hardware: Transcription is CPU-intensive. If possible, enable GPU Acceleration.</li> </ul>"},{"location":"troubleshooting/#kosync-port-not-working","title":"KOSync Port Not Working","text":"<ul> <li>Issue: You set <code>KOSYNC_PORT</code> but cannot connect on that port.</li> <li>Solution: Ensure you have mapped the port in your <code>docker-compose.yml</code>.</li> <li>Example: <code>ports: - \"5758:5758\"</code> if <code>KOSYNC_PORT=5758</code>.</li> </ul>"},{"location":"troubleshooting/#whispercpp-model-ignored","title":"WhisperCpp Model Ignored","text":"<ul> <li>Issue: WhisperCpp seems to use 'large-v3' even if I select 'small' in the UI.</li> <li>Solution: Previous versions had a bug where the model parameter wasn't sent. This is fixed in the latest release.</li> <li>Ensure <code>WHISPER_MODEL</code> is set in your environment variables (e.g., <code>WHISPER_MODEL=small</code>).</li> <li>Check the logs to see the request URL and data being sent.</li> </ul>"},{"location":"troubleshooting/#syncing-backwards","title":"Syncing backwards?","text":"<p>The system includes anti-regression logic, but if you switch devices rapidly, issues can occur.</p> <ul> <li>Solution: Go to the Dashboard and click \"Reset Progress\" for the affected book. This clears the stored sync state without affecting your external accounts.</li> </ul>"},{"location":"troubleshooting/#logs","title":"Logs","text":"<p>Documentation and live logs are available directly in the Web UI. Alternatively, you can view them via the terminal:</p> <pre><code>docker compose logs -f\n</code></pre> <p>Look for lines starting with <code>[INFO]</code> or <code>[ERROR]</code>.</p>"},{"location":"troubleshooting/#gpu-acceleration","title":"GPU Acceleration","text":"<p>See the Configuration Guide for instructions on enabling NVIDIA GPU acceleration.</p>"},{"location":"user-guide/","title":"User Guide","text":"<p>This guide covers the features and workflows available in the ABS-KoSync Enhanced Web UI.</p>"},{"location":"user-guide/#dashboard","title":"Dashboard","text":"<p>The Dashboard is your command center. It shows:</p> <ul> <li>Active Syncs: A list of all books currently being tracked.</li> <li>Sync Status: Real-time progress bars for each book.</li> <li>Recent Activity: A log of the latest sync actions.</li> <li>Single Match: Manually link an audiobook to an ebook.</li> <li>Batch Match: Switch to the Batch Matcher view.</li> </ul>"},{"location":"user-guide/#sync-modes","title":"Sync Modes","text":"<p>When creating a mapping, the system operates in one of two modes:</p>"},{"location":"user-guide/#1-audiobook-sync-default","title":"1. Audiobook Sync (Default)","text":"<p>Links an Audiobook in ABS to an Ebook in KOReader (and other platforms).</p> <ul> <li>Mechanism: Transcription-based alignment.</li> <li>Use Case: Listening on phone, reading on Kindle/Kobo.</li> <li>Process: Mapping creates a transcript of the audiobook, then uses that text to find the corresponding page in the ebook.</li> </ul>"},{"location":"user-guide/#2-ebook-only-sync","title":"2. Ebook-Only Sync","text":"<p>Links your ebook status across platforms.</p> <ul> <li>Mechanism: Direct percentage/text position sync.</li> <li>Triggers:</li> <li>Internal KOSync: Instant (Push-based).</li> <li>ABS/Booklore: Periodic Polling (every ~5 mins).</li> <li>Supported Clients:</li> <li>KOReader (via Internal KOSync Server)</li> <li>Booklore (Requires <code>BOOKLORE_ENABLED=true</code>)</li> <li>ABS Ebook (Requires <code>SYNC_ABS_EBOOK=true</code>)</li> <li>Hardcover: Updates Hardcover.app presence (if configured).</li> <li>Note: If you only use Booklore and ABS Web Reader (no KOReader), syncs will occur only during the periodic poll interval.</li> </ul>"},{"location":"user-guide/#matcher","title":"Matcher","text":"<p>The Matcher is where you link an Audiobookshelf audiobook to its corresponding text format. The new 3-Column Interface makes it easy to select the best source for your needs.</p>"},{"location":"user-guide/#1-the-3-step-flow","title":"1. The 3-Step Flow","text":""},{"location":"user-guide/#step-1-select-audiobook-required","title":"Step 1: Select Audiobook (Required)","text":"<p>First, search for your audiobook. The system queries your ABS library. Select the correct title to proceed.</p>"},{"location":"user-guide/#step-2-storyteller-link-optional","title":"Step 2: Storyteller Link (Optional)","text":"<p>If you use Storyteller, the system will try to find a matching \"Artifact\" (the processed ebook) in your Storyteller library.</p> <ul> <li>Match Found: Select the card to link it via its precise UUID.</li> <li>No Match/Incorrect: Select \"None - Do not link\". This tells the system to ignore Storyteller for this book and use the standard ebook instead.</li> </ul> <p>[!TIP] Tri-Link Feature: You can link both a Storyteller Artifact (for voice-synced reading) AND a standard Retail EPUB (for lightweight reading on other devices). The progress will sync between all three!</p>"},{"location":"user-guide/#step-3-select-standard-ebook-fallback","title":"Step 3: Select Standard Ebook (Fallback)","text":"<p>Select the standard EPUB file you want to use for regular sync. The system searches multiple sources:</p> <ol> <li>ABS Direct: Checks if the Audiobook item in ABS already contains an EPUB file.</li> <li>Booklore: Checks your curated metadata database.</li> <li>CWA: Searches your Calibre-Web Automated OPDS feed.</li> <li>ABS Search: Searches other ABS libraries for a matching title.</li> <li>Filesystem: Scans your local <code>/books</code> directory.</li> </ol> <p>Source Badges: Look for the colored badges on ebook cards to know where the file is coming from (e.g., <code>BOOKLORE</code>, <code>ABS</code>, <code>CWA</code>, <code>LOCAL</code>).</p>"},{"location":"user-guide/#creating-the-mapping","title":"Creating the Mapping","text":"<p>Once you've made your selections, click Create Mapping. The system will download any necessary files (from CWA/ABS) and begin the alignment process.</p>"},{"location":"user-guide/#batch-match","title":"Batch Match","text":"<p>For users with large libraries, the Batch Matcher speeds up the process.</p> <ol> <li>Queue: Add multiple books to the matching queue.</li> <li>Auto-Suggest: The system will attempt to find the best matching EPUB for each audiobook based on filename similarity.</li> <li>Confirm: Review the suggestions and confirm them in bulk.</li> </ol>"},{"location":"user-guide/#forge-storyteller-integration","title":"Forge (Storyteller Integration)","text":"<p>The Forge is a powerful tool designed to prepare \"Synced Books\" for Storyteller. It handles the complex file management required to get audio and text aligned.</p>"},{"location":"user-guide/#what-it-does","title":"What it does","text":"<ol> <li>Staging: Copies audio files (from ABS) and ebook files (from Booklore/Local/CWA) to a temporary staging area in the correct <code>StorytellerLibrary/Title/</code> structure.</li> <li>Processing: Automatically triggers Storyteller to scan and process the new book.</li> <li>Cleanup: Monitors the output folder. Once Storyteller finishes generating the \"Readaloud\" ebook, Forge automatically deletes the source files to save space.</li> </ol>"},{"location":"user-guide/#two-ways-to-forge","title":"Two Ways to Forge","text":""},{"location":"user-guide/#1-auto-forge-from-the-matcher-recommended","title":"1. Auto-Forge (from the Matcher \u2014 Recommended)","text":"<p>When creating a mapping in the Matcher, you can choose \"Forge &amp; Match\" instead of \"Create Mapping\". This:</p> <ul> <li>Stages and processes the book through Storyteller automatically.</li> <li>Automatically creates the sync mapping once Storyteller finishes, linking the ABS audiobook, the original EPUB, and the new Storyteller artifact in one step.</li> </ul> <p>This is the recommended workflow for most users.</p>"},{"location":"user-guide/#2-manual-forge-from-the-forge-page","title":"2. Manual Forge (from the Forge page)","text":"<p>The standalone Forge page (<code>/forge</code>) lets you stage and process a book through Storyteller without creating a sync mapping. Use this if you want to prepare a book for Storyteller independently and then link it manually via the Matcher later.</p>"},{"location":"user-guide/#when-to-use-it","title":"When to use it","text":"<p>Use Forge if you want the immersive Read-Along experience in the Storyteller app.</p> <p>[!IMPORTANT] Active Processing: Forge is an active tool. It communicates directly with the Storyteller API to trigger processing. Ensure your Storyteller integration is configured in Settings.</p>"},{"location":"user-guide/#auto-discovery-internal-kosync-only","title":"Auto-Discovery (Internal KOSync Only)","text":"<p>If you configure your KOReader devices to sync directly to this bridge (using the Built-in KOSync Bridge), the system can automatically detect and link books for you. This is the only way to automatically create Ebook-Only links without manual approval.</p> <p>[!TIP] Built-in KOSync Bridge: In the Settings page, under KOSync Integration, enable the integration and check \"Use Built-in KOSync Bridge\". The UI will display the URL to enter into KOReader's sync settings.</p>"},{"location":"user-guide/#how-it-works","title":"How it works","text":"<ol> <li>Push: You open a book in KOReader. It pushes progress to the bridge instantaneously.</li> <li>Match: The bridge looks for a matching audiobook in your ABS library.</li> <li>Action:<ul> <li>Audiobook Found: Creates a Suggestion on your Dashboard (requires approval).</li> <li>No Audiobook Found: Automatically creates an Ebook-Only Sync mapping, allowing immediate cross-device tracking.</li> </ul> </li> </ol> <p>[!IMPORTANT] Trigger Constraint: This \"Auto-Creation\" feature requires using the Internal KOSync Server. Polling traditional services (ABS/Booklore) will simply create Suggestions, which always require manual approval.</p>"},{"location":"user-guide/#suggestions","title":"Suggestions","text":"<p>The system can also intelligently suggest mappings based on activity, but these always require manual confirmation.</p> <p>Sources:</p> <ol> <li>Audiobookshelf (Periodic Polling): When the bridge sees you listening to an unmapped audiobook, it suggests a matching ebook.</li> <li>Internal KOSync (Push): When you read an unmapped ebook that does have a matching audiobook.</li> </ol> <p>Actions:</p> <ul> <li>Review: Opens the Matcher pre-filled.</li> <li>Dismiss: Removes the suggestion.</li> </ul>"},{"location":"user-guide/#management","title":"Management","text":""},{"location":"user-guide/#editing-mappings","title":"Editing Mappings","text":"<p>You can edit or delete existing mappings from the Dashboard.</p> <ul> <li>Delete: Stops syncing the book. Does NOT delete the files.</li> <li>Reset Progress: Clears the stored sync state if things get out of whack.</li> </ul>"},{"location":"user-guide/#viewing-logs","title":"Viewing Logs","text":"<p>Navigate to Logs in the sidebar to view the live application logs. This is useful for troubleshooting why a specific book might not be syncing.</p>"}]}